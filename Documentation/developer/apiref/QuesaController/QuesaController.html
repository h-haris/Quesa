<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html><HEAD>
    <title>API Documentation</title>
	 <meta name="generator" content="HeaderDoc">
</HEAD>
<BODY bgcolor="#ffffff">
<H1>QuesaController.h</H1><hr>
<br><br>
<h4> Declares the Quesa controller interface </h4>
This interface is available in Quesa and has been partly implemented on the
MacOS X platform.<br><br>
At first glance it seems that there is no distinction between controller driver and client in the Q3Controller API. 
Explanations are introduced to show on which side it is suitable to use a certain function. If not further noted, 
functions are suitable for usage on driver and client side.<br>
Sample driver implementations for pre-MacOS X systems could 
be found at <A HREF="http://www.io.tudelft.nl/research/IDEATE/drivers/" target="_top"> http://www.io.tudelft.nl/research/IDEATE/drivers/</A>
(broken link) <A HREF="https://web.archive.org/web/20030116162937/http://www.io.tudelft.nl/research/IDEATE/drivers/" target="_top"> archive.org
(wayback machine)</A>. A driver for the Magellan SpaceMouse implemented using Cocoa will be added to the project later.
<h3> Driver, Deviceserver, Client with his Tracker </h3>
<h4> The Deviceserver </h4>
The Deviceserver holds a database of all controller device drivers created with Q3Controller_New.
There is no Q3Controller_Delete; controller device drivers can only be decommissioned using Q3Controller_Decommission.
They stay registered for the lifetime of the Deviceserver. A re-New is possible.
<h4> The controller device driver </h4>
This program opens the interface to the device. It transfers the device state, position, orientation, internal values
and buttons to their representations of the controller state. On decommission it closes the interface. TQ3ControllerRef
is a plain reference, not a QD3D object.
<h4> The client </h4>
The client searches for registered controller device drivers. If it finds a suitable driver, it assigns a tracker object 
(Q3Tracker) to the driver. It can also communicate with the controller device driver via the Q3Controller API.
<h4> Q3Tracker - The device tracker </h4>
This QD3D object is modified, if the controller, which it is assigned to, changes its state.
<h4> The System Cursor </h4>
Currently the 3D system cursor is not implemented.<br>
The exposure of the Q3CursorTracker API may be useful for later implementation of the 3D system cursor.
<h3> QD3D 1.6 as reference implementation </h3>
When using the MacOS QD3D 1.6 extension as is, it is impossible to use the Q3Controller API to communicate
between the separated controller device driver and device client. This will only work if driver and device client are the 
same application. This violates the description in "3D Graphics Programming With QuickDraw 3D 1.5.4" and the implementation 
by the QD3D 1.5.4 extension. A fix for this misbehavior is the following line, which has to be executed inside the 
MPW:<br>
<tt>modpef -share "ControllerCore"=global -o "QuickDraw&#153 3D mod" "QuickDraw&#153 3D"</tt><br>
This command sets the global data section of the library "ControllerCore" to be shared. To activate the fix, place under 
MacOS 9 and earlier "QuickDraw&#153 3D mod" instead of "QuickDraw&#153 3D" inside your extensions folder and reboot.<br><br>
<em>Note: Long term stability is unknown. This bug was never confirmed and the fix was never submitted.</em>		
<h3> MacOS X </h3>
In the current approach under MacOS X deviceserver and driver run both in user space. Interprocess communication 
is done via the distributed object (PDO) mechanism. They shall be started in following order: deviceserver, driver and the client 
application.<br>
<br><br><br>
 <br><br>
<hr><br><center>&#169; 1999-2019 Quesa Developers (Last Updated 12/7/2019)
<br><font size="-1">HTML documentation generated by <a href="http://www.opensource.apple.com/projects" target="_blank">HeaderDoc</a></font>
</center>
</BODY>
</HTML>
